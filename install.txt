=====================================

Intégration de ionyweb dans django-coop:
----------------------------------------

git clone https://github.com/makinacorpus/django-coop

cd ~/projects/django-coop
export DJANGO_COOP_IONYWEB_PROJECT=`pwd`

vi $DJANGO_COOP_IONYWEB_PROJECT/coop/templates/project_template/requirements.txt

et pour rajouter l'app à INSTALLED_APPS c'est ici : 
vi $DJANGO_COOP_IONYWEB_PROJECT/coop/default_project_settings.py


============
Installation
============
# Basée sur https://github.com/credis/django-coop/wiki/Installation

cd ~/projects/promess84
virtualenv --no-site-packages .
export DJANGO_COOP_IONYWEB_PROJECT=`pwd`
source $DJANGO_COOP_IONYWEB_PROJECT/bin/activate

pip install django==1.4
pip install -e git+git://github.com/makinacorpus/django-coop@django-coop-ionyweb#egg=django-coop

coop-admin.py startproject promess84 --domain www.exemple.com --redis_port 6379

easy_install -U distribute
pip install -r promess84/requirements.txt
pip install django-selectable # temporaire, car il manquait dans le requirements.txt
pip install simplejson
pip uninstall coop-geo
rm -rf ls ../lib/python2.7/site-packages/coop_geo/
rm -rf ls ../lib/python2.7/site-packages/coop_geo-0.2.0-py2.7.egg-info/
rm -rf ls ../lib/python2.7/site-packages/coop-geo.egg-link
pip install -e git+git://github.com/makinacorpus/coop-geo@master#egg=coop-geo



cd promess84

# Créer la base de données
# Editer le fichier coop_local/local_settings.py
# Editer le fichier coop_local/db_settings.py

sudo chmod -R g+rw media
chmod +x manage.py 
./manage.py collectstatic

python manage.py syncdb --all
python manage.py migrate --fake
python manage.py convert_to_south coop_local
./manage.py loaddata coop_local/fixtures/*


ionyweb:
--------
cd ~/projects/promess84/promess84/
git clone ssh://sbe@cgit.makina-corpus.net/var/git/promess84.git promess84_ionyweb

# For ionyweb 
pip uninstall django-tinymce
pip install django-tinymce==1.5.1b2

python manage.py syncdb
python manage.py migrate


# Dans la table django_site, mettre à jour le nom de domaine

Import de données (promess84) :
cd ~/projects/promess84/promess84$
./manage.py loaddata ~/tmp/file_manager.json
./manage.py loaddata ~/tmp/page.json      
./manage.py loaddata ~/tmp/plugin.json            
./manage.py loaddata ~/tmp/plugin_links_list.json     
./manage.py loaddata ~/tmp/plugin_video.json
./manage.py loaddata ~/tmp/page_agenda.json
./manage.py loaddata ~/tmp/page_redirect.json      
./manage.py loaddata ~/tmp/plugin_contact.json  
./manage.py loaddata ~/tmp/plugin_map.json          
./manage.py loaddata ~/tmp/plugin_website_title.json
./manage.py loaddata ~/tmp/page_sitemap.json 
./manage.py loaddata ~/tmp/plugin_fb_likebox.json
./manage.py loaddata ~/tmp/plugin_fb_likebox.json
./manage.py loaddata ~/tmp/page_book.json         
./manage.py loaddata ~/tmp/page_gallery_images.json 
./manage.py loaddata ~/tmp/plugin_blog_entries_list.json 
./manage.py loaddata ~/tmp/website.json
./manage.py loaddata ~/tmp/plugin_breadcrumb.json 
./manage.py loaddata ~/tmp/page_blog.json         
./manage.py loaddata ~/tmp/page_text.json      
./manage.py loaddata ~/tmp/plugin_image.json  
./manage.py loaddata ~/tmp/plugin_text.json         
./manage.py loaddata ~/tmp/south.json 


=====================================

Lancement :
-----------
cd ~/projects/promess84
export DJANGO_COOP_IONYWEB_PROJECT=`pwd`
source $DJANGO_COOP_IONYWEB_PROJECT/bin/activate
cd promess84
./manage.py runserver



