=====================================


============
Installation
============
# Basée sur https://github.com/credis/django-coop/wiki/Installation

sudo apt-get install python-virtualenv git mercurial libpq-dev \
                     libmysqlclient-dev python-dev geoip-bin

cd ~/projects/promess84
virtualenv --no-site-packages .
export DJANGO_COOP_IONYWEB_PROJECT=`pwd`
source $DJANGO_COOP_IONYWEB_PROJECT/bin/activate

pip install django==1.4.5
pip install -e git+git://github.com/makinacorpus/django-coop@django-coop-ionyweb#egg=django-coop

coop-admin.py startproject promess84 --domain www.exemple.com

pip install -U distribute
pip install -r promess84/requirements.txt


cd promess84

# Créer la base de données
# Editer le fichier coop_local/local_settings.py
# Editer le fichier coop_local/db_settings.py

sudo chmod -R g+rw media
chmod +x manage.py 
./manage.py collectstatic

python manage.py syncdb --all
python manage.py migrate --fake
python manage.py convert_to_south coop_local
./manage.py loaddata coop_local/fixtures/*


ionyweb:
--------
cd ~/projects/promess84/promess84/
git clone ssh://sbe@cgit.makina-corpus.net/var/git/promess84.git promess84_ionyweb

# For ionyweb 
pip uninstall django-tinymce
pip install django-tinymce==1.5.1b2

python manage.py syncdb
python manage.py migrate


# Dans la table django_site, mettre à jour le nom de domaine

# Export/Import de données (promess84) :
# Note: il faut utiliser l'option --natural de dumpdata pour éviter
# l'incohérence des contenttypes et ajuster le chemin des medias
cd ~/projects/promess84/promess84
./manage.py loaddata ~/tmp/promess84_ionyweb.json

# Export/import des media:
# copier le répertoire media de ionyweb dans celui de django_coop


=====================================

Lancement :
-----------
cd ~/projects/promess84
export DJANGO_COOP_IONYWEB_PROJECT=`pwd`
source $DJANGO_COOP_IONYWEB_PROJECT/bin/activate
cd promess84
./manage.py runserver



