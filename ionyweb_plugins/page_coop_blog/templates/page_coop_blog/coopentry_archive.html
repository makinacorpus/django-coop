{% load i18n %}


<script type="text/javascript">
    // We need to set a new class to content element, in order do properly display the form and the other elements
    $('#main-content').addClass("search_form_enabled");
</script>

<div id="articles_top_search"></div>
<div id="search_form">
    <form action="{{ base_url }}" method="post">{% csrf_token %}
        <div class="search_column" id="search_column1">
            <div class="search_block checkbox_custom" id="date">
                <span class="search_title">{% trans "Date" %}</span>
                {{ form.date }}
            </div>

            <div class="search_block" id="search_submit">
                <input type="submit" value="{% trans "Search" %}" />                
            </div>
        </div>
        <div class="search_column" id="search_column2">
            <div class="search_block checkbox_custom" id="thematic">
                <span class="search_title">{% trans "Thematic" %}</span>
                {{ form.thematic }}
            </div>
            <div class="search_block checkbox_custom" id="thematic2">
                {{ form.thematic2 }}
            </div>
            <div class="search_block checkbox_custom" id="thematic3">
                {{ form.thematic3 }}
            </div>
        </div>
        <div class="search_column" id="search_column3">
            <div class="search_block" id="organization">
                <span class="search_title">{% trans "Organization" %}</span>
                {{ form.organization }}
            </div>

            <div class="search_block" id="free_search">
                <span class="search_title">{% trans "Free search" %}</span>
                {{ form.free_search }}
            </div>

        </div>
        <div class="search_column" id="search_column3">
            <div class="search_block" id="activity">
                <span class="search_title">{% trans "Activity" %}</span>
                {{ form.activity }}
            </div>
            <div class="search_block" id="activity2">
                {{ form.activity2 }}
            </div>

        </div>
    </form>
</div>

<script type="text/javascript">
    $(function() {
        $.datepicker.regional['fr'] = {
            closeText: 'Fermer',
            prevText: '&#x3c;Préc',
            nextText: 'Suiv&#x3e;',
            currentText: 'Courant',
            monthNames: ['Janvier','Février','Mars','Avril','Mai','Juin',
            'Juillet','Août','Septembre','Octobre','Novembre','Décembre'],
            monthNamesShort: ['Jan','Fév','Mar','Avr','Mai','Jun',
            'Jul','Aoû','Sep','Oct','Nov','Déc'],
            dayNames: ['Dimanche','Lundi','Mardi','Mercredi','Jeudi','Vendredi','Samedi'],
            dayNamesShort: ['Dim','Lun','Mar','Mer','Jeu','Ven','Sam'],
            dayNamesMin: ['Di','Lu','Ma','Me','Je','Ve','Sa'],
            weekHeader: 'Sm',
            dateFormat: 'dd/mm/yy',
            firstDay: 1,
            isRTL: false,
            showMonthAfterYear: false,
            yearSuffix: ''};
        $.datepicker.setDefaults($.datepicker.regional['fr']);

        $('#id_date').datepicker({dateFormat: 'yy-mm-dd', constrainInput: false});

        });
</script>


<div id="articles_top"></div>
<div id="articles">
{% if entries %}
    {% for entry in entries %}
    <div class="entry">
        <div class="resume">
            {% if entry.image != '' %}
                <div class="block_img_off"><img src="{{ media_path }}{{ entry.image }}" alt=""></div>
            {% else %}
                <div class="block_img"></div>
            {% endif %}

            <h3><a href="{{ base_url }}p/{{ entry.pk }}">{{ entry.title }}</a></h3>
            <span class="location">{{ entry.author }}</span>
            <p class="entry-meta">
                {{ entry.publication_date|date:"d/m/Y @ H:i" }}
            </p>
            <div class="entry-body">
                {{ entry.resume|truncatewords_html:50|safe }}
            </div>
            <span class="readmore"><a class="articles_link" href="{{ base_url }}p/{{ entry.pk }}">{% trans "Read more" %}</a></span>
            {% if request.user.is_superuser %}
                <span class="edit"><a class="" href="{{ base_url }}p/entry_edit/{{ entry.pk }}">{% trans "Edit" %}</a></span>
            {% endif %}
        </div>
    </div>
    {% endfor %}
{% else %}
    <p><strong>{% trans "No entry yet" %}.</strong></p>
{% endif %}
</div>